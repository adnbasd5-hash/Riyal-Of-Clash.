<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØµØ±Ø§Ø¹ Ø§Ù„Ø±ÙŠØ§Ù„ | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ©</title>
    <style>
        :root { --gold: #ffd700; --bg: #050a14; }
        body { background: var(--bg); color: white; font-family: 'Arial'; margin: 0; overflow-x: hidden; }
        .screen { display: none; min-height: 100vh; width: 100vw; }
        .active { display: block; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-header { background: rgba(0,0,0,0.9); padding: 15px; display: flex; justify-content: space-around; border-bottom: 2px solid var(--gold); position: sticky; top:0; z-index: 100; }
        
        /* Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ */
        .world-map { display: grid; grid-template-columns: 1fr; gap: 20px; padding: 20px; padding-bottom: 100px; }
        .region-card { border: 3px solid #444; border-radius: 20px; height: 120px; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; cursor: pointer; transition: 0.3s; background-size: cover; background-position: center; }
        .region-card:hover { border-color: var(--gold); transform: scale(1.02); }
        .locked { filter: grayscale(1); cursor: not-allowed; opacity: 0.5; }

        /* Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø¹Ø±ÙƒØ© */
        .arena { height: 100vh; background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://img.freepik.com/free-vector/battle-background-with-fire-sparks_23-2148962304.jpg'); background-size: cover; }
        .battle-view { display: flex; justify-content: space-around; align-items: center; height: 60%; padding-top: 50px; }
        .character { text-align: center; }
        .hp-container { width: 120px; height: 15px; background: #333; border-radius: 10px; border: 1px solid white; margin-bottom: 10px; }
        .hp-bar { height: 100%; background: #ff4d4d; width: 100%; transition: 0.5s; }
        .char-img { font-size: 80px; filter: drop-shadow(0 0 15px var(--gold)); }
        
        /* Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ */
        #box-screen { background: radial-gradient(#1e3a8a, #000); text-align: center; padding-top: 50px; }
        .box-anim { font-size: 150px; cursor: pointer; transition: 0.3s; filter: drop-shadow(0 0 20px var(--gold)); }
        .box-anim:hover { transform: scale(1.1); }

        .controls { position: fixed; bottom: 0; width: 100%; background: rgba(0,0,0,0.9); padding: 15px; display: flex; justify-content: center; gap: 10px; }
        button { background: var(--gold); color: black; padding: 12px 20px; border: none; font-weight: bold; border-radius: 10px; cursor: pointer; box-shadow: 0 4px 0 #b8860b; }
        .btn-blue { background: #3498db; color: white; box-shadow: 0 4px 0 #2980b9; }
    </style>
</head>
<body>

    <div class="stats-header">
        <span>ğŸ’° Ø§Ù„Ø°Ù‡Ø¨: <b id="gold-txt">5000</b></span>
        <span>ğŸ† Ø§Ù„Ù…Ø±Ø­Ù„Ø©: <b id="level-txt">1</b></span>
    </div>

    <div id="map-screen" class="screen active">
        <h1 style="text-align:center; color:var(--gold);">Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØºØ²Ùˆ ğŸŒ</h1>
        <div class="world-map">
            <div class="region-card" style="background-image: url('https://img.freepik.com/free-photo/forest-landscape_23-2148159150.jpg');" onclick="enterBattle(1, 'ØºØ§Ø¨Ø© Ø§Ù„ÙˆØ­ÙˆØ´', 'ğŸº')">1. ØºØ§Ø¨Ø© Ø§Ù„ÙˆØ­ÙˆØ´ ğŸŒ²</div>
            <div id="reg-2" class="region-card locked" style="background-image: url('https://img.freepik.com/free-photo/desert-landscape_23-2148159141.jpg');" onclick="enterBattle(2, 'ØµØ­Ø±Ø§Ø¡ Ø§Ù„Ù‡Ù„Ø§Ùƒ', 'ğŸ¦‚')">2. ØµØ­Ø±Ø§Ø¡ Ø§Ù„Ù‡Ù„Ø§Ùƒ ğŸœï¸</div>
            <div id="reg-3" class="region-card locked" style="background-image: url('https://img.freepik.com/free-photo/snowy-mountains_23-2148159160.jpg');" onclick="enterBattle(3, 'Ø¹Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙŠÙ†', 'ğŸ‰')">3. Ø¹Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙŠÙ† â„ï¸</div>
        </div>
        <div class="controls">
            <button onclick="showScreen('box-screen')" class="btn-blue">ğŸ ÙØªØ­ ØµÙ†Ø§Ø¯ÙŠÙ‚ (500ğŸ’°)</button>
        </div>
    </div>

    <div id="battle-screen" class="screen arena">
        <h2 id="battle-title" style="text-align:center;"></h2>
        <div class="battle-view">
            <div class="character">
                <div class="hp-container"><div id="p-hp" class="hp-bar"></div></div>
                <div class="char-img" id="player-img">ğŸ›¡ï¸</div>
                <h3>Ø£Ù†Øª</h3>
            </div>
            <div class="character">
                <div class="hp-container"><div id="e-hp" class="hp-bar"></div></div>
                <div id="e-img" class="char-img"></div>
                <h3 id="e-name">Ø§Ù„ÙˆØ­Ø´</h3>
            </div>
        </div>
        <div class="controls">
            <button onclick="attack()">Ù‡Ø¬ÙˆÙ… âš”ï¸</button>
            <button onclick="heal()" style="background: #2ecc71;">ØªØ±Ù…ÙŠÙ… âœ¨</button>
            <button onclick="showScreen('map-screen')" style="background: #666;">Ø§Ù†Ø³Ø­Ø§Ø¨ ğŸ³ï¸</button>
        </div>
    </div>

    <div id="box-screen" class="screen">
        <h1 class="gold-text">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø­Ø¸ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ</h1>
        <div id="box-ui">
            <div class="box-anim" onclick="openBox()">ğŸ</div>
            <p>Ø§Ø¶ØºØ· Ù„Ù„ÙØªØ­ Ù…Ù‚Ø§Ø¨Ù„ 500 Ø°Ù‡Ø¨ÙŠØ©</p>
        </div>
        <div id="reward-ui" style="display:none;">
            <div id="reward-icon" style="font-size:120px;"></div>
            <h2 id="reward-text" class="gold-text"></h2>
            <button onclick="showScreen('map-screen')">Ù…Ù…ØªØ§Ø²!</button>
        </div>
    </div>

    <script>
        let gold = 5000, level = 1, pHP = 100, eHP = 100, currentLevel = 1;
        let pDmgMult = 1; // Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‚ÙˆØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø¨Ø·Ø§Ù„ Ù…Ù† Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚
        const legendaryHeroes = ["ğŸ—¡ï¸", "ğŸ¹", "ğŸ§™", "ğŸ¤–", "ğŸ§", "ğŸ¦", "ğŸ”¥", "â„ï¸"];

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'box-screen') {
                document.getElementById('box-ui').style.display = 'block';
                document.getElementById('reward-ui').style.display = 'none';
            }
        }

        function enterBattle(lvl, name, img) {
            if(lvl > level) return alert("Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…ØºÙ„Ù‚Ø©!");
            currentLevel = lvl;
            pHP = 100; eHP = 100 + (lvl * 30);
            document.getElementById('e-name').innerText = name;
            document.getElementById('e-img').innerText = img;
            document.getElementById('battle-title').innerText = name;
            updateUI();
            showScreen('battle-screen');
        }

        function attack() {
            let pDmg = (Math.floor(Math.random() * 20) + 15) * pDmgMult;
            let eDmg = Math.floor(Math.random() * (10 + currentLevel * 5));
            eHP -= pDmg; pHP -= eDmg;
            if(eHP <= 0) {
                alert("Ù†ØµØ± Ø³Ø§Ø­Ù‚! +1000 Ø°Ù‡Ø¨");
                gold += 1000;
                if(currentLevel === level) level++;
                unlockRegions();
                showScreen('map-screen');
            } else if(pHP <= 0) {
                alert("Ø®Ø³Ø±Øª! Ø¹Ø¯ Ù„Ù„Ù…Ø¯ÙŠÙ†Ø©");
                showScreen('map-screen');
            }
            updateUI();
        }

        function openBox() {
            if(gold < 500) return alert("Ø§Ù„Ø°Ù‡Ø¨ ØºÙŠØ± ÙƒØ§ÙÙ!");
            gold -= 500;
            const hero = legendaryHeroes[Math.floor(Math.random() * legendaryHeroes.length)];
            pDmgMult += 0.5; // ÙƒÙ„ Ø¨Ø·Ù„ ÙŠØ²ÙŠØ¯ Ù‚ÙˆØªÙƒ 50%
            document.getElementById('box-ui').style.display = 'none';
            document.getElementById('reward-ui').style.display = 'block';
            document.getElementById('reward-icon').innerText = hero;
            document.getElementById('reward-text').innerText = "Ø¨Ø·Ù„ Ø¬Ø¯ÙŠØ¯! Ù‚ÙˆØªÙƒ Ø²Ø§Ø¯Øª!";
            document.getElementById('player-img').innerText = hero;
            updateUI();
        }

        function heal() { pHP = Math.min(100, pHP + 20); updateUI(); }

        function unlockRegions() {
            if(level >= 2) document.getElementById('reg-2').classList.remove('locked');
            if(level >= 3) document.getElementById('reg-3').classList.remove('locked');
            updateUI();
        }

        function updateUI() {
            document.getElementById('p-hp').style.width = pHP + "%";
            document.getElementById('e-hp').style.width = (eHP / (100 + currentLevel * 30) * 100) + "%";
            document.getElementById('gold-txt').innerText = gold;
            document.getElementById('level-txt').innerText = level;
        }
    </script>
</body>
</html>
