<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Riyal of Clash | Brawl Edition</title>
    <style>
        :root { --gold: #ffd700; --hp: #2ecc71; }
        body { margin: 0; background: #000; overflow: hidden; touch-action: none; font-family: 'Arial'; }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨ ÙˆØ§Ù„ÙˆØ§Ø¬Ù‡Ø© */
        #game-container { position: relative; width: 100vw; height: 100vh; background: url('https://img.freepik.com/free-vector/battle-arena-background_23-2148141443.jpg') center/cover; }
        canvas { display: block; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø·Ø¨Ù‚ Ø§Ù„Ø£ØµÙ„ */
        .top-stats { position: fixed; top: 10px; width: 100%; display: flex; justify-content: space-around; z-index: 100; pointer-events: none; }
        .stat-item { background: rgba(0,0,0,0.8); border: 2px solid var(--gold); border-radius: 15px; padding: 5px 15px; font-weight: bold; color: white; display: flex; align-items: center; gap: 5px; }

        /* Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ø£Ù†Ø§Ù„ÙˆØ¬ ÙˆØ£Ø²Ø±Ø§Ø± Ø§Ù„Ù‡Ø¬ÙˆÙ… */
        .joystick-container { position: fixed; bottom: 40px; left: 40px; width: 120px; height: 120px; background: rgba(255,255,255,0.1); border-radius: 50%; border: 3px solid rgba(255,255,255,0.3); }
        #stick { position: absolute; width: 60px; height: 60px; background: #fff; border-radius: 50%; top: 30px; left: 30px; opacity: 0.8; }
        
        .attack-btn { position: fixed; bottom: 50px; right: 50px; width: 100px; height: 100px; background: #e74c3c; border-radius: 50%; border: 5px solid white; display: flex; align-items: center; justify-content: center; font-size: 40px; box-shadow: 0 8px 0 #c0392b; cursor: pointer; }

        /* ØªØ³Ù…ÙŠØ© Ø§Ù„Ø¨Ø·Ù„ ÙˆØ´Ø±ÙŠØ· Ø§Ù„Ø­ÙŠØ§Ø© */
        .hp-bar-container { position: absolute; width: 60px; height: 8px; background: #000; border-radius: 4px; border: 1px solid white; }
        .hp-fill { height: 100%; background: var(--hp); border-radius: 4px; transition: 0.2s; }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="top-stats">
            <div class="stat-item">ğŸ† <span>3051</span></div>
            <div class="stat-item">ğŸ’° <span>2544</span></div>
            <div class="stat-item">ğŸ’ <span>208</span></div>
        </div>

        <canvas id="mainCanvas"></canvas>

        <div class="joystick-container" id="joy-base">
            <div id="stick"></div>
        </div>

        <div class="attack-btn" id="fire-btn">âš”ï¸</div>
    </div>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø´Ø®ØµÙŠØ§Øª (Ø¢ÙŠØ´ ÙˆÙƒÙˆÙ„Øª)
        const ashImg = new Image();
        ashImg.src = 'https://raw.githubusercontent.com/BrawlStars/BrawlStars-Assets/master/Brawlers/Ash/Ash_Icon.png'; 
        
        const enemyImg = new Image();
        enemyImg.src = 'https://raw.githubusercontent.com/BrawlStars/BrawlStars-Assets/master/Brawlers/Colt/Colt_Icon.png';

        let player = { x: canvas.width/2, y: canvas.height/2, hp: 4500, maxHp: 4500, size: 60, speed: 5, dirX: 0, dirY: 0 };
        let bullets = [], enemies = [{ x: 200, y: 200, hp: 3000, maxHp: 3000 }];

        // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ù†Ø§Ù„ÙˆØ¬
        const stick = document.getElementById('stick');
        const joyBase = document.getElementById('joy-base');
        let joyActive = false;

        joyBase.addEventListener('touchstart', () => joyActive = true);
        window.addEventListener('touchmove', (e) => {
            if(!joyActive) return;
            let t = e.touches[0];
            let rect = joyBase.getBoundingClientRect();
            let dx = t.clientX - (rect.left + 60);
            let dy = t.clientY - (rect.top + 60);
            let dist = Math.min(Math.hypot(dx, dy), 40);
            let angle = Math.atan2(dy, dx);
            
            stick.style.transform = `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px)`;
            player.dirX = Math.cos(angle);
            player.dirY = Math.sin(angle);
        });
        window.addEventListener('touchend', () => {
            joyActive = false;
            stick.style.transform = 'translate(0,0)';
            player.dirX = 0; player.dirY = 0;
        });

        // Ø²Ø± Ø§Ù„Ù‡Ø¬ÙˆÙ…
        document.getElementById('fire-btn').addEventListener('touchstart', () => {
            bullets.push({ x: player.x, y: player.y, vx: player.dirX*15 || 15, vy: player.dirY*15 || 0 });
        });

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù„Ø§Ø¹Ø¨
            player.x += player.dirX * player.speed;
            player.y += player.dirY * player.speed;

            // Ø±Ø³Ù… Ø§Ù„Ø¨Ø·Ù„ (Ø¢ÙŠØ´)
            ctx.drawImage(ashImg, player.x - 30, player.y - 30, 60, 60);
            drawHP(player.x, player.y - 45, player.hp, player.maxHp, "Ø£Ù†Øª");

            // Ø±Ø³Ù… Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡ (ÙƒÙˆÙ„Øª)
            enemies.forEach((en, i) => {
                ctx.drawImage(enemyImg, en.x - 30, en.y - 30, 60, 60);
                drawHP(en.x, en.y - 45, en.hp, en.maxHp, "Ø¨ÙˆØª");
                // Ù…Ø·Ø§Ø±Ø¯Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨
                en.x += (player.x - en.x) * 0.01;
                en.y += (player.y - en.y) * 0.01;
            });

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµØ§Øµ ÙˆØ§Ù„ØªØµØ§Ø¯Ù…
            bullets.forEach((b, bi) => {
                b.x += b.vx; b.y += b.vy;
                ctx.fillStyle = "yellow";
                ctx.beginPath(); ctx.arc(b.x, b.y, 6, 0, Math.PI*2); ctx.fill();
                
                enemies.forEach((en, ei) => {
                    if(Math.hypot(b.x-en.x, b.y-en.y) < 30) {
                        en.hp -= 800;
                        bullets.splice(bi, 1);
                        if(en.hp <= 0) enemies.splice(ei, 1);
                    }
                });
            });

            requestAnimationFrame(gameLoop);
        }

        function drawHP(x, y, hp, max, name) {
            ctx.fillStyle = "rgba(0,0,0,0.5)";
            ctx.fillRect(x - 30, y, 60, 8);
            ctx.fillStyle = "#2ecc71";
            ctx.fillRect(x - 30, y, (hp/max)*60, 8);
            ctx.fillStyle = "white";
            ctx.font = "12px Arial";
            ctx.fillText(name, x - 10, y - 5);
        }

        gameLoop();
    </script>
</body>
</html>
